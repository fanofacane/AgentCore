## 结论说明
- 读取切换版本核心实现，确认是否会创建用户侧快照（user_rag_files/user_rag_documents）。
- 依据 installType 决策：除 0.0.1 外默认 SNAPSHOT，会自动重建快照；0.0.1 为 REFERENCE，不创建用户快照。

## 代码依据（只读核对）
- 查看 UserRagDomainService.switchRagVersion 的流程：删除旧快照→更新 user_rags→若新类型为 SNAPSHOT 则 createUserSnapshot。
- 查看 UserRagSnapshotDomainService.createUserSnapshot 的复制范围：从 rag_version_files/documents 复制到用户快照表，并建立文件ID映射。

## 可选改动（如你希望“任何版本切换都生成快照”）
- 调整 determineInstallType 或新增配置开关，把 0.0.1 也纳入 SNAPSHOT；并评估作者私有版本的权限与数据一致性影响。
- 增加单元测试/集成测试：切换到 SNAPSHOT 后用户快照表行数变化、vectorId 复制正确。

确认后我再按你选择的策略实施（保持现状/改为全版本快照）。