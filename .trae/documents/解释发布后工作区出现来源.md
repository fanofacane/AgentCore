## 结论（你看到的“刚发布的Agent出现在工作区”从哪来的）
- 不是 `publishAgentVersion` 把它加进工作区的。
- 它来自你在“创建Agent”时就已经写入的 `agent_workspace` 记录：创建完成后立刻执行了 `agentWorkspaceService.save(new AgentWorkspaceEntity(agentId, userId, ...))`，因此不管你是否发布版本，你的工作区里都会存在这个 agent。

## 关键代码证据
- 创建Agent时自动加入创建者工作区：
  - [AgentAppServiceImpl.createAgent](file:///d:/software/AgentCore/src/main/java/com/sky/AgentCore/service/agent/Impl/AgentAppServiceImpl.java#L84-L123)
  - 关键行：`agentWorkspaceService.save(agentWorkspaceEntity);`（L106-L108）
- 发布版本流程不涉及工作区写入：
  - [AgentAppServiceImpl.publishAgentVersion](file:///d:/software/AgentCore/src/main/java/com/sky/AgentCore/service/agent/Impl/AgentAppServiceImpl.java#L345-L374)
  - [AgentAppServiceImpl.publishAgentVersion(内部)](file:///d:/software/AgentCore/src/main/java/com/sky/AgentCore/service/agent/Impl/AgentAppServiceImpl.java#L420-L457)
  - 这里做的是保存 `agent_versions`、更新 `agents.published_version`，没有对 `agent_workspace` 的 save/remove。
- 工作区查询来源：工作区接口先查 `agent_workspace` 拿 agentIds，再查版本/agent信息组装。
  - [AgentWorkspaceServiceImpl.getAgents](file:///d:/software/AgentCore/src/main/java/com/sky/AgentCore/service/agent/Impl/AgentWorkspaceServiceImpl.java#L44-L104)

## 如果你期望“发布后才出现在工作区”
- 需要改业务语义：创建Agent时不要自动插入 `agent_workspace`；或者工作区查询时过滤“未发布”的 agent。
- 我可以在你确认期望后再给出改造方案与兼容迁移策略。